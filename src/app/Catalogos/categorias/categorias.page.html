<app-main-header titulo="Categorias"></app-main-header>

<ion-content [fullscreen]="true" id="main-content">
  <div class="container ion-padding">
    <ng-container *ngFor="let subcategoria of subcategorias; let i = index;">
      <ion-accordion-group>
        <ion-accordion value="{{ subcategoria.id }}">
          <ion-item slot="header" color="light">
            <ion-label>{{ subcategoria.subcategoria }}</ion-label>
            <ion-button (click)="AbrirModal(subcategoria.id, 'Nueva')" class="crear">
              <ion-icon name="add-circle-outline"></ion-icon>
              <div class="button-text">Crear</div>
            </ion-button>
          </ion-item>
          
          <div slot="content">
            <table class="categories-table tabla">
              <thead>
                <tr>
                  <th>Subcategoría</th>
                  <th>Categoría</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                <ng-container *ngFor="let categoria of filterCategoriesBySubcategory(categorias, subcategoria.id);">
                  <tr>
                    <td>{{ subcategoria.subcategoria }}</td>
                    <td>{{ categoria.categoria }}</td>
                    <td>
                      <ion-button size="small" fill="clear" color="success" (click)="AbrirModal(categoria.id, 'Actualizar')">
                        <ion-icon name="pencil"></ion-icon>
                      </ion-button>
                      <ion-button size="small" fill="clear" color="success" (click)="AbrirModalProducto(categoria.id, 'Nuevo')">
                        <ion-icon name="fast-food-outline"></ion-icon>
                      </ion-button>
                      <ion-button size="small" fill="clear" color="danger" (click)="eliminarCategoria(categoria)">
                        <ion-icon name="trash"></ion-icon>
                      </ion-button>
                    </td>
                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
        </ion-accordion>
      </ion-accordion-group>
    </ng-container>
  </div>
</ion-content>
